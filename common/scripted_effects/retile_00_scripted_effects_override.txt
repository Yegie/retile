create_fe_home_citadel = {
	create_starbase = {
		size = "starbase_citadel"

		building = "target_uplink_computer"
		building = "defense_grid"
		building = "colossus_yards"
		building = "titan_yards"
		
		module = "shipyard"
		module = "shipyard"
		module = "shipyard"			
		module = "hangar_bay"
		module = "gun_battery"
		module = "gun_battery"		

		effect = {
			while = {
				count = 10
				create_fallen_empire_platform = yes
			}	
		}
	}
}

create_fe_citadel = {
	create_starbase = {
		size = "starbase_citadel"

		building = "crew_quarters"
		building = "command_center"
		building = "target_uplink_computer"
		building = "listening_post"
		
		module = "shipyard"
		module = "anchorage"
		module = "anchorage"
		module = "hangar_bay"
		module = "gun_battery"
		#module = "gun_battery"

		effect = {
			while = {
				count = 4
				create_fallen_empire_platform = yes
			}	
		}			
	}
}

create_fe_fringe_colony = {
	set_planet_flag = fallen_empire_world
	prevent_anomaly = yes
	set_owner = ROOT

	add_building = building_ancient_palace		# 6 precursors
	add_building = building_class_4_singularity # 16 custodians
	add_building = building_nano_forge
	add_building = building_fe_dome
	
	while = {
		count = 12	# 48 precursors
		add_district = district_city
	}
	add_deposit = retile_deposit_preserve	# 10 custodians
	add_deposit = retile_deposit_preserve
	while = {
		count = 54
		create_pop = {
			species = owner_main_species
		}
	}
	while = {
		count = 26
		create_pop = {
			species = event_target:fe_servants
		}
	}
}

create_fe_spiritualist_fringe_colony = {
	set_planet_flag = fallen_empire_world
	prevent_anomaly = yes
	set_owner = ROOT
	add_building = building_ancient_palace		# 6 precursors
	add_building = building_class_4_singularity # 16 custodians
	add_building = building_nano_forge
	add_building = building_fe_dome
	
	while = {
		count = 12	# 48 precursors
		add_district = district_city
	}
	add_deposit = retile_deposit_preserve	# 10 custodians
	add_deposit = retile_deposit_preserve
	while = {
		count = 80
		create_pop = {
			species = owner_main_species
		}
	}
}

# Change planet class one step up in temperature
increase_planet_temperature = {
	if = {
		limit = { is_planet_class = pc_barren }
		change_pc = pc_molten
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_desert }
		change_pc = pc_molten
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_arid }
		change_pc = pc_barren
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_savannah }
		change_pc = pc_barren
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_ocean }
		change_pc = pc_desert
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_continental }
		change_pc = pc_arid
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_tropical }
		change_pc = pc_savannah
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_arctic }
		change_pc = pc_ocean
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_alpine }
		change_pc = pc_continental
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_tundra }
		change_pc = pc_tropical
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_barren_cold }
		change_pc = pc_tundra
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_frozen }
		change_pc = pc_arctic
		reroll_planet = yes
		retile_clear_blockers = yes
	}
}

# Change planet class one step down in temperature
decrease_planet_temperature = {
	if = {
		limit = { is_planet_class = pc_molten }
		change_pc = pc_desert
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_barren }
		change_pc = pc_arid
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_desert }
		change_pc = pc_ocean
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_arid }
		change_pc = pc_continental
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_savannah }
		change_pc = pc_tropical
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_ocean }
		change_pc = pc_arctic
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_continental }
		change_pc = pc_alpine
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_tropical }
		change_pc = pc_tundra
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_arctic }
		change_pc = pc_frozen
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_alpine }
		change_pc = pc_frozen
		reroll_planet = yes
		retile_clear_blockers = yes
	}
	else_if = {
		limit = { is_planet_class = pc_tundra }
		random_list = {
			50 = { change_pc = pc_frozen }
			50 = { change_pc = pc_barren_cold }
		}
		reroll_planet = yes
		retile_clear_blockers = yes
	}
}